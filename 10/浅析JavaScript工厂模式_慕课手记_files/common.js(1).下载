define(function(require,exports,module){require("/static/lib/juicer/juicer.min.js"),require("/static/lib/jquery-qrcode/jquery.qrcode.min.js");var c=jQuery({});require("/static/page/common/limitinput.js");var a=$("#comment-tpl").html(),y=$("#Recomment-tpl").html(),g=require("./tpl/publish.js"),h=require("./tpl/detail.js"),v=require("./tpl/forward.js"),w=require("./tpl/detail_forward.js"),j=OP_CONFIG.userInfo?OP_CONFIG.userInfo.uid:"",b=function(c,a){var y="",g=c.otherImgUrl||c.imgUrl;"qzone"==a?(y="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+c.url+"&title="+encodeURIComponent(c.title)+"&desc="+encodeURIComponent(c.desc)+"&summary=&site=&pics="+g,window.open(y)):"tsina"==a?(y="http://service.weibo.com/share/share.php?url="+c.url+"&title="+c.title+"&appkey=2254855082&pic="+g+"&searchPic=true",window.open(y)):"weixin"==a&&($.dialog('<div id="qrcode-big"></div>',{title:"分享到微信朋友圈",width:"280px",height:"320px"}),$("#qrcode-big").qrcode({width:216,height:216,text:c.url}))};module.exports={on:function(){c.on.apply(c,arguments)},removeEvent:function(){c.off.apply(c,arguments)},emit:function(){c.trigger.apply(c,arguments)},API:{publish:"/discovery/create",forward:"/discovery/transmit",comment:"/discovery/savecomment",getcomment:"/discovery/comment",praise:"/discovery/support",recomment:"",saveReply:"/discovery/savereply",getReply:"/discovery/reply",follows:"/u/"+j+"/ajaxfollows",dynamiclist:"/discovery/dynamiclist",followlist:"/discovery/followlist"},Template:{commentTpl:a,PublishTpl:g,DetailTpl:h,ForwardTpl:v,detailForwardTpl:w,recommentTpl:y},MaxLength:160,share:b,escapeHTML:function(s){return s=""+s,s.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}});